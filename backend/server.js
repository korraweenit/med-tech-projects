/* ==================================
    1. "‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤" ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ (Import)
   ================================== */
// 1.1) ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ "Express" (‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á API)
const express = require('express');
// 1.2) ‡πÉ‡∏ä‡πâ CORS Middleware (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ)
const cors = require('cors'); // <-- 1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ


/* ==================================
    2. "‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤" ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Setup)
   ================================== */
// 2.1) ‡∏™‡∏£‡πâ‡∏≤‡∏á "‡πÅ‡∏≠‡∏õ" (‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£) ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å Express
const app = express();
app.use(cors()); //
let caseDatabase = []; // <-- ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤!
// 2.2) ‡∏Å‡∏≥‡∏´‡∏ô‡∏î "‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" (Port) ‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î
//      (Port 3000 ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏ó‡∏î‡∏™‡∏≠‡∏ö" ‡∏Ñ‡∏£‡∏±‡∏ö)
const port = 3000;

/* ==================================
    3. (Mission) ‡∏™‡∏£‡πâ‡∏≤‡∏á "‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü" (API Endpoint)
   ================================== */
// 3.1) ‡∏™‡∏£‡πâ‡∏≤‡∏á "‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü" (API) ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
//      ‡∏ó‡∏µ‡πà‡πÇ‡∏ï‡πä‡∏∞‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç "/vitals" (vitals = ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ä‡∏µ‡∏û)
app.get('/vitals', (req, res) => {
    
    // 3.2) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å... ‡πÉ‡∏´‡πâ "‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Mock-up)
    const patientVitals = {
        patientId: "HN12345",
        heartRate: 72,
        bloodPressure: "120/80",
        temperatureC: 36.8
    };

    // 3.3) "‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö" (Response) ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
    //      ‡∏î‡πâ‡∏ß‡∏¢ "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô JSON
    res.json(patientVitals);
});

/* ==================================
    4. "‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡πâ‡∏≤‡∏ô" (Start Server)
   ================================== */
// 4.1) ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ "‡πÅ‡∏≠‡∏õ" (‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£) ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
//      ‡πÄ‡∏£‡∏¥‡πà‡∏° "‡πÄ‡∏õ‡∏¥‡∏î" ‡∏ó‡∏µ‡πà "‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà" (port) ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ
//      ‡πÅ‡∏•‡∏∞ "‡∏ï‡∏∞‡πÇ‡∏Å‡∏ô" ‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡πÉ‡∏ô Terminal ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤ "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞!"
app.listen(port, () => {
    console.log(`ü©∫ Med-Tech Backend Server "‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡πâ‡∏≤‡∏ô" ‡πÅ‡∏•‡πâ‡∏ß`);
    console.log(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà http://localhost:${port}`);
});